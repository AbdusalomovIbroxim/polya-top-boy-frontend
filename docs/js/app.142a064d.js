(function(){"use strict";var e={3576:function(e,t,s){var o=s(5130),a=s(6768);const r={id:"app"};function i(e,t,s,o,i,n){const l=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(l)])}var n={name:"App"},l=s(1241);const c=(0,l.A)(n,[["render",i]]);var d=c,u=s(1387),g=s(4232);const m={class:"relative flex size-full min-h-screen flex-col bg-white justify-between group/design-root overflow-x-hidden pb-20",style:{"font-family":'Lexend, "Noto Sans", sans-serif'}},h={key:0,class:"flex justify-center items-center p-8"},f={key:1,class:"text-center p-8 text-red-500"};function p(e,t,s,o,r,i){const n=(0,a.g2)("AppHeader"),l=(0,a.g2)("FilterTabs"),c=(0,a.g2)("StadiumCard"),d=(0,a.g2)("NavigationBar");return(0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("div",null,[(0,a.bF)(n),(0,a.bF)(l,{onTabChanged:i.filterChanged},null,8,["onTabChanged"]),r.loading?((0,a.uX)(),(0,a.CE)("div",h,t[0]||(t[0]=[(0,a.Lk)("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#4ddf20]"},null,-1)]))):r.error?((0,a.uX)(),(0,a.CE)("div",f,(0,g.v_)(r.error),1)):((0,a.uX)(!0),(0,a.CE)(a.FK,{key:2},(0,a.pI)(i.filteredStadiums,(e=>((0,a.uX)(),(0,a.Wv)(c,{key:e.id,stadium:e},null,8,["stadium"])))),128))]),(0,a.bF)(d)])}s(8111),s(2489),s(1701);const k={class:"flex items-center bg-white p-4 pb-2 justify-between"};function x(e,t,s,o,r,i){return(0,a.uX)(),(0,a.CE)("div",k,t[0]||(t[0]=[(0,a.Fv)('<h2 class="text-[#131711] text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pl-12">Football Field</h2><div class="flex w-12 items-center justify-end"><button class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 bg-transparent text-[#131711] gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0"><div class="text-[#131711]"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256"><path d="M128,64a40,40,0,1,0,40,40A40,40,0,0,0,128,64Zm0,64a24,24,0,1,1,24-24A24,24,0,0,1,128,128Zm0-112a88.1,88.1,0,0,0-88,88c0,31.4,14.51,64.68,42,96.25a254.19,254.19,0,0,0,41.45,38.3,8,8,0,0,0,9.18,0A254.19,254.19,0,0,0,174,200.25c27.45-31.57,42-64.85,42-96.25A88.1,88.1,0,0,0,128,16Zm0,206c-16.53-13-72-60.75-72-118a72,72,0,0,1,144,0C200,161.23,144.53,209,128,222Z"></path></svg></div></button></div>',2)]))}var v={name:"AppHeader"};const b=(0,l.A)(v,[["render",x]]);var w=b;const y={class:"pb-3"},L={class:"flex border-b border-[#dee5dc] px-4 gap-8"},C=["onClick"],_={class:"text-sm font-bold leading-normal tracking-[0.015em]"};function E(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",y,[(0,a.Lk)("div",L,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.tabs,((e,t)=>((0,a.uX)(),(0,a.CE)("a",{key:t,class:(0,g.C4)(["flex flex-col items-center justify-center border-b-[3px] pb-[13px] pt-4",[i.activeTab===t?"border-b-[#131711] text-[#131711]":"border-b-transparent text-[#6c8764]"]]),href:"#",onClick:(0,o.D$)((e=>n.selectTab(t)),["prevent"])},[(0,a.Lk)("p",_,(0,g.v_)(e),1)],10,C)))),128))])])}var I={name:"FilterTabs",data(){return{activeTab:0,tabs:["All","Tashkent","Favorites"]}},methods:{selectTab(e){this.activeTab=e,this.$emit("tab-changed",this.tabs[e])}}};const A=(0,l.A)(I,[["render",E]]);var S=A;s(4114);const D={class:"p-4 @container"},T={class:"flex flex-col items-stretch justify-start rounded-xl @xl:flex-row @xl:items-start"},P={class:"relative w-full aspect-video overflow-hidden"},X={class:"relative w-full h-full"},B={key:0,class:"absolute bottom-2 left-0 right-0 flex justify-center gap-2 px-2 z-10"},j=["onClick"],F={class:"flex w-full min-w-72 grow flex-col items-stretch justify-center gap-1 py-4 @xl:px-4"},M={class:"text-[#131711] text-lg font-bold leading-tight tracking-[-0.015em]"},H={class:"flex items-end gap-3 justify-between"},N={class:"flex flex-col gap-1"},q={class:"text-[#6c8764] text-base font-normal leading-normal"},$={class:"text-[#6c8764] text-base font-normal leading-normal"};function Z(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",D,[(0,a.Lk)("div",T,[(0,a.Lk)("div",P,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(0,o.D$)(((...e)=>n.toggleFavorite&&n.toggleFavorite(...e)),["stop"])),class:"absolute top-2 right-2 z-20 p-2 rounded-full bg-white/80 hover:bg-white transition-colors"},[((0,a.uX)(),(0,a.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:(0,g.C4)({"fill-red-500 stroke-red-500":i.isFavorite})},t[5]||(t[5]=[(0,a.Lk)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},null,-1)]),2))]),(0,a.Lk)("div",X,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.stadium.images,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:(0,g.C4)(["absolute inset-0 w-full h-full bg-center bg-no-repeat bg-cover rounded-xl transition-all duration-500",{"opacity-100 scale-100":i.currentImageIndex===s,"opacity-0 scale-110":i.currentImageIndex!==s}]),style:(0,g.Tr)({backgroundImage:`url(${e})`}),onTouchstart:t[1]||(t[1]=(...e)=>n.touchStart&&n.touchStart(...e)),onTouchmove:t[2]||(t[2]=(...e)=>n.touchMove&&n.touchMove(...e)),onTouchend:t[3]||(t[3]=(...e)=>n.touchEnd&&n.touchEnd(...e))},null,38)))),128))]),s.stadium.images.length>1?((0,a.uX)(),(0,a.CE)("div",B,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.stadium.images,((e,t)=>((0,a.uX)(),(0,a.CE)("button",{key:t,onClick:e=>i.currentImageIndex=t,class:(0,g.C4)(["w-2 h-2 rounded-full transition-all duration-300",i.currentImageIndex===t?"bg-white scale-125":"bg-white/50"])},null,10,j)))),128))])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",F,[(0,a.Lk)("p",M,(0,g.v_)(s.stadium.name),1),(0,a.Lk)("div",H,[(0,a.Lk)("div",N,[(0,a.Lk)("p",q,(0,g.v_)(s.stadium.location),1),(0,a.Lk)("p",$,(0,g.v_)(s.stadium.price)+"/hour",1)]),(0,a.Lk)("button",{onClick:t[4]||(t[4]=t=>e.$router.push(`/stadium/${s.stadium.id}`)),class:"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-8 px-4 bg-[#4ddf20] text-[#131711] text-sm font-medium leading-normal"},t[6]||(t[6]=[(0,a.Lk)("span",{class:"truncate"},"Book",-1)]))])])])])}s(116);var V=s(4373);const Q="http://localhost:8000/api",O=V.A.create({baseURL:Q,headers:{"Content-Type":"application/json"}});O.interceptors.request.use((e=>{const t=localStorage.getItem("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),O.interceptors.response.use((e=>e),(async e=>{const t=e.config;if(401===e.response.status&&!t._retry){t._retry=!0;try{const e=localStorage.getItem("refresh_token"),s=await O.post("/token/refresh/",{refresh:e}),{access:o}=s.data;return localStorage.setItem("access_token",o),t.headers.Authorization=`Bearer ${o}`,O(t)}catch(s){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/auth",Promise.reject(s)}}return Promise.reject(e)}));const z={async login(e,t){const s=await O.post("/token/",{username:e,password:t}),{access:o,refresh:a}=s.data;return localStorage.setItem("access_token",o),localStorage.setItem("refresh_token",a),s.data},async verifyToken(e){return O.post("/token/verify/",{token:e})},async refreshToken(){const e=localStorage.getItem("refresh_token"),t=await O.post("/token/refresh/",{refresh:e}),{access:s}=t.data;return localStorage.setItem("access_token",s),s},async getCurrentUser(){return O.get("/users/me/")},logout(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}};var G=O;const R={getFavorites(){return G.get("/favorites/")},addToFavorites(e){return G.post("/favorites/",{playground:e})},removeFromFavorites(e){return G.delete(`/favorites/${e}/`)}};var U={name:"StadiumCard",props:{stadium:{type:Object,required:!0}},data(){return{currentImageIndex:0,touchStartX:0,touchEndX:0,minSwipeDistance:50,isFavorite:!1,favoriteId:null}},async created(){await this.checkFavoriteStatus()},methods:{async checkFavoriteStatus(){try{const e=await R.getFavorites(),t=e.data.results.find((e=>e.playground===this.stadium.id));t&&(this.isFavorite=!0,this.favoriteId=t.id)}catch(e){console.error("Error checking favorite status:",e)}},async toggleFavorite(){try{if(this.isFavorite)await R.removeFromFavorites(this.favoriteId),this.isFavorite=!1,this.favoriteId=null;else{const e=await R.addToFavorites(this.stadium.id);this.isFavorite=!0,this.favoriteId=e.data.id}}catch(e){console.error("Error toggling favorite:",e)}},touchStart(e){this.touchStartX=e.touches[0].clientX},touchMove(e){this.touchEndX=e.touches[0].clientX},touchEnd(){const e=this.touchEndX-this.touchStartX;Math.abs(e)>this.minSwipeDistance&&(e>0?this.prevImage():this.nextImage())},nextImage(){this.currentImageIndex=(this.currentImageIndex+1)%this.stadium.images.length},prevImage(){this.currentImageIndex=0===this.currentImageIndex?this.stadium.images.length-1:this.currentImageIndex-1}}};const W=(0,l.A)(U,[["render",Z],["__scopeId","data-v-316c1f7c"]]);var K=W;const Y={class:"fixed bottom-0 left-0 right-0 z-50"},J={class:"flex gap-2 border-t border-[#f1f4f0] bg-white px-4 pb-3 pt-2"},ee={class:"flex h-8 items-center justify-center"},te={xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256"},se=["d"],oe={class:"text-xs font-medium leading-normal tracking-[0.015em]"};function ae(e,t,s,o,r,i){const n=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",Y,[(0,a.Lk)("div",J,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.navItems,((t,s)=>((0,a.uX)(),(0,a.Wv)(n,{key:s,to:t.to,class:(0,g.C4)(["just flex flex-1 flex-col items-center justify-end gap-1",[e.$route.path===t.to?"text-[#131711]":"text-[#6c8764]"]])},{default:(0,a.k6)((()=>[(0,a.Lk)("div",ee,[((0,a.uX)(),(0,a.CE)("svg",te,[(0,a.Lk)("path",{d:t.icon},null,8,se)]))]),(0,a.Lk)("p",oe,(0,g.v_)(t.name),1)])),_:2},1032,["to","class"])))),128))]),t[0]||(t[0]=(0,a.Lk)("div",{class:"h-5 bg-white"},null,-1))])}var re={name:"NavigationBar",data(){return{navItems:[{name:"Home",to:"/",icon:"M218.83,103.77l-80-75.48a1.14,1.14,0,0,1-.11-.11,16,16,0,0,0-21.53,0l-.11.11L37.17,103.77A16,16,0,0,0,32,115.55V208a16,16,0,0,0,16,16H96a16,16,0,0,0,16-16V160h32v48a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V115.55A16,16,0,0,0,218.83,103.77ZM208,208H160V160a16,16,0,0,0-16-16H112a16,16,0,0,0-16,16v48H48V115.55l.11-.1L128,40l79.9,75.43.11.1Z"},{name:"Favorites",to:"/favorites",icon:"M240,94c0,70-103.79,126.66-108.21,129a8,8,0,0,1-7.58,0C119.79,220.66,16,164,16,94A62.07,62.07,0,0,1,78,32c20.65,0,38.73,8.88,50,23.89C139.27,40.88,157.35,32,178,32A62.07,62.07,0,0,1,240,94Z"},{name:"Bookings",to:"/bookings",icon:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM48,48H208V96H48ZM208,208H48V112H208v96Z"},{name:"Profile",to:"/profile",icon:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24ZM74.08,197.5a64,64,0,0,1,107.84,0,87.83,87.83,0,0,1-107.84,0ZM96,120a32,32,0,1,1,32,32A32,32,0,0,1,96,120Zm97.76,66.41a79.66,79.66,0,0,0-36.06-28.75,48,48,0,1,0-59.4,0,79.66,79.66,0,0,0-36.06,28.75,88,88,0,1,1,131.52,0Z"}]}}};const ie=(0,l.A)(re,[["render",ae]]);var ne=ie;const le={async getStadiums(e={}){try{const t=await G.get("/playgrounds/",{params:{city:e.city,type:e.type,min_price:e.minPrice,max_price:e.maxPrice,company:e.company},withCredentials:!0});return t.data}catch(t){throw console.error("Error fetching stadiums:",t),t}},async getStadiumDetails(e){console.log("API: Fetching stadium details for ID:",e);try{const t=await G.get(`/playgrounds/${e}/`,{withCredentials:!0});return console.log("API: Stadium details response:",t.data),{id:t.data.id,name:t.data.name,location:t.data.company.address||"Ташкент, Узбекистан",price_per_hour:t.data.price_per_hour,images:t.data.images.map((e=>e.image)),company:{id:t.data.company.id,username:t.data.company.username,role:t.data.company.role}}}catch(t){throw console.error("API: Error fetching stadium details:",t),t}},async checkAvailability(e,t){if(console.log("API: Starting checkAvailability request"),console.log("API: Parameters:",{id:e,date:t}),console.log("API: Full URL:",`/playgrounds/${e}/check_availability/`),!e)throw console.error("API: Error - id is undefined or null"),new Error("ID стадиона не указан");if(!t)throw console.error("API: Error - date is undefined or null"),new Error("Дата не указана");try{const s=(new Date).getTimezoneOffset();console.log("API: Using timezone offset:",s);const o={params:{date:t},headers:{"X-Timezone-Offset":s.toString(),Accept:"application/json","Content-Type":"application/json"},withCredentials:!0};console.log("API: Request configuration:",o),console.log("API: Sending request to:",`/playgrounds/${e}/check_availability/`);const a=await G.get(`/playgrounds/${e}/check_availability/`,o);console.log("API: Raw response:",a),console.log("API: Response data:",a.data),console.log("API: Response status:",a.status),console.log("API: Response headers:",a.headers);const r={working_hours:a.data.working_hours,hours:a.data.hours,date:a.data.date,time_points:a.data.time_points||[]};return console.log("API: Processed result:",r),r}catch(s){throw console.error("API: Error in checkAvailability:",s),console.error("API: Error details:",{message:s.message,status:s.response?.status,data:s.response?.data,headers:s.response?.headers,config:s.config}),s.response?(console.error("API: Server error response:",s.response.data),new Error(s.response.data.detail||"Ошибка сервера")):s.request?(console.error("API: No response received:",s.request),new Error("Нет ответа от сервера")):(console.error("API: Request setup error:",s.message),new Error("Ошибка при отправке запроса: "+s.message))}},async createBooking(e){console.log("API: Creating booking with data:",e);try{const t=await G.post("/bookings/",e,{withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});return console.log("API: Booking created successfully:",t.data),{id:t.data.id,playground:t.data.playground,playground_details:t.data.playground_details,user:t.data.user,user_details:t.data.user_details,start_time:t.data.start_time,end_time:t.data.end_time,status:t.data.status,payment_status:t.data.payment_status,payment_url:t.data.payment_url,qr_code:t.data.qr_code,total_price:t.data.total_price,deposit_amount:t.data.deposit_amount,created_at:t.data.created_at,updated_at:t.data.updated_at,session_key:t.data.session_key}}catch(t){throw console.error("API: Error creating booking:",t),t.response?(console.error("API: Error response status:",t.response.status),console.error("API: Error response data:",t.response.data),console.error("API: Error response headers:",t.response.headers)):t.request?console.error("API: No response received:",t.request):console.error("API: Error setting up request:",t.message),t}},async getAvailableTimeSlots(e,t){try{const s=await G.get(`/playgrounds/${e}/available-slots/`,{params:{date:t},withCredentials:!0});return s.data}catch(s){throw console.error("Error fetching available time slots:",s),s}},async getBookingHistory(){try{const e=await G.get("/bookings/",{withCredentials:!0});return e.data}catch(e){throw console.error("Error fetching booking history:",e),e}},async cancelBooking(e){try{const t=await G.post(`/bookings/${e}/cancel/`,{},{withCredentials:!0});return t.data}catch(t){throw console.error("Error canceling booking:",t),t}}};var ce={name:"HomePage",components:{AppHeader:w,FilterTabs:S,StadiumCard:K,NavigationBar:ne},data(){return{activeFilter:"All",stadiums:[],loading:!1,error:null}},computed:{filteredStadiums(){return"All"===this.activeFilter?this.stadiums:"Tashkent"===this.activeFilter?this.stadiums.filter((e=>"Tashkent"===e.city)):"Favorites"===this.activeFilter?[]:this.stadiums}},methods:{filterChanged(e){this.activeFilter=e},async fetchStadiums(){this.loading=!0,this.error=null;try{const e=await le.getStadiums({city:"Tashkent"===this.activeFilter?"Tashkent":void 0});this.stadiums=e.results.map((e=>({id:e.id,name:e.name,location:`${e.city}, ${e.address}`,price:`$${e.price_per_hour}`,images:e.images.map((e=>e.image))})))}catch(e){this.error="Failed to load stadiums",console.error("Error fetching stadiums:",e)}finally{this.loading=!1}}},mounted(){this.fetchStadiums()},watch:{activeFilter(){this.fetchStadiums()}}};const de=(0,l.A)(ce,[["render",p]]);var ue=de;const ge={class:"relative flex size-full min-h-screen flex-col bg-white justify-between group/design-root overflow-x-hidden pb-20",style:{"font-family":'Lexend, "Noto Sans", sans-serif'}},me={key:0,class:"p-4 text-center text-gray-500"},he={key:1,class:"p-4 text-center text-red-500"},fe={key:2,class:"p-4 text-center text-gray-500"},pe={class:"flex w-full items-end justify-between gap-4 p-4"},ke={class:"flex max-w-[440px] flex-1 flex-col gap-1"},xe={class:"text-white tracking-light text-2xl font-bold leading-tight max-w-[440px]"},ve={class:"text-white text-base font-medium leading-normal"};function be(e,t,s,o,r,i){const n=(0,a.g2)("NavigationBar");return(0,a.uX)(),(0,a.CE)("div",ge,[(0,a.Lk)("div",null,[t[0]||(t[0]=(0,a.Lk)("div",{class:"flex flex-col gap-2 bg-white p-4 pb-2"},[(0,a.Lk)("div",{class:"flex items-center h-12 justify-end"}),(0,a.Lk)("p",{class:"text-[#131711] tracking-light text-[28px] font-bold leading-tight"},"My Favorites")],-1)),r.isLoading?((0,a.uX)(),(0,a.CE)("div",me," Загрузка... ")):r.error?((0,a.uX)(),(0,a.CE)("div",he,(0,g.v_)(r.error),1)):0===r.favoriteStadiums.length?((0,a.uX)(),(0,a.CE)("div",fe," У вас пока нет избранных полей ")):((0,a.uX)(!0),(0,a.CE)(a.FK,{key:3},(0,a.pI)(r.favoriteStadiums,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"p-4"},[(0,a.Lk)("div",{class:"bg-cover bg-center flex flex-col items-stretch justify-end rounded-xl pt-[132px]",style:(0,g.Tr)({backgroundImage:`linear-gradient(0deg, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0) 100%), url('${e.image}')`})},[(0,a.Lk)("div",pe,[(0,a.Lk)("div",ke,[(0,a.Lk)("p",xe,(0,g.v_)(e.name),1),(0,a.Lk)("p",ve,(0,g.v_)(e.location),1)])])],4)])))),128))]),(0,a.bF)(n)])}var we={name:"FavoritesPage",components:{NavigationBar:ne},data(){return{favoriteStadiums:[],isLoading:!1,error:null}},async created(){await this.fetchFavorites()},methods:{async fetchFavorites(){this.isLoading=!0,this.error=null;try{const e=await R.getFavorites();this.favoriteStadiums=e.data.results.map((e=>({id:e.id,name:e.playground_details.name,location:`${e.playground_details.city}, ${e.playground_details.address}`,image:e.playground_details.images?.[0]?.image||"https://cdn.usegalileo.ai/sdxl10/fb181260-a540-4659-a807-c8362cf91735.png"})))}catch(e){this.error="Не удалось загрузить избранные поля",console.error("Error fetching favorites:",e)}finally{this.isLoading=!1}}}};const ye=(0,l.A)(we,[["render",be]]);var Le=ye;const Ce={class:"relative flex size-full min-h-screen flex-col bg-white justify-between group/design-root overflow-x-hidden pb-20",style:{"font-family":'Lexend, "Noto Sans", sans-serif'}},_e={class:"flex items-center bg-white p-4 pb-2 justify-between"},Ee={class:"flex w-12 items-center justify-end"},Ie={key:0,class:"flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 bg-transparent text-[#131711] gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0"},Ae={class:"flex p-4 @container"},Se={class:"flex w-full flex-col gap-4 items-start"},De={class:"flex gap-4 flex-col items-start"},Te={class:"flex flex-col justify-center"},Pe={class:"text-[#131711] text-[22px] font-bold leading-tight tracking-[-0.015em]"},Xe={class:"text-[#6c8764] text-base font-normal leading-normal"},Be={class:"text-[#6c8764] text-base font-normal leading-normal"},je={key:0,class:"text-[#6c8764] text-base font-normal leading-normal"},Fe={key:0,class:"flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 bg-[#f1f4f0] text-[#131711] text-sm font-bold leading-normal tracking-[0.015em] w-full max-w-[480px] @[480px]:w-auto"};function Me(e,t,s,o,r,i){const n=(0,a.g2)("NavigationBar");return(0,a.uX)(),(0,a.CE)("div",Ce,[(0,a.Lk)("div",null,[(0,a.Lk)("div",_e,[t[2]||(t[2]=(0,a.Lk)("h2",{class:"text-[#131711] text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pl-12"},"Профиль",-1)),(0,a.Lk)("div",Ee,[r.isAuthenticated?((0,a.uX)(),(0,a.CE)("button",Ie,t[1]||(t[1]=[(0,a.Lk)("div",{class:"text-[#131711]"},[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256"},[(0,a.Lk)("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"})])],-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Ae,[(0,a.Lk)("div",Se,[(0,a.Lk)("div",De,[t[3]||(t[3]=(0,a.Lk)("div",{class:"bg-center bg-no-repeat aspect-square bg-cover rounded-full min-h-32 w-32",style:{"background-image":'url("https://cdn.usegalileo.ai/sdxl10/40f70546-ecd7-4361-be87-04d23971368e.png")'}},null,-1)),(0,a.Lk)("div",Te,[(0,a.Lk)("p",Pe,(0,g.v_)(r.userData.username),1),(0,a.Lk)("p",Xe,(0,g.v_)(r.userData.first_name)+" "+(0,g.v_)(r.userData.last_name),1),(0,a.Lk)("p",Be,(0,g.v_)(r.userData.phone||"Телефон не указан"),1),r.isAuthenticated?((0,a.uX)(),(0,a.CE)("p",je," В системе с "+(0,g.v_)(i.formatDate(r.userData.date_joined)),1)):(0,a.Q3)("",!0)])]),r.isAuthenticated?((0,a.uX)(),(0,a.CE)("button",Fe,t[4]||(t[4]=[(0,a.Lk)("span",{class:"truncate"},"Пригласить поиграть",-1)]))):((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[0]||(t[0]=(...e)=>i.goToAuth&&i.goToAuth(...e)),class:"flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 bg-[#4a90e2] text-white text-sm font-bold leading-normal tracking-[0.015em] w-full max-w-[480px] @[480px]:w-auto"},t[5]||(t[5]=[(0,a.Lk)("span",{class:"truncate"},"Войти",-1)])))])])]),(0,a.bF)(n)])}var He={name:"ProfilePage",components:{NavigationBar:ne},data(){return{isAuthenticated:!1,userData:{id:null,username:"",email:"",first_name:"",last_name:"",role:"",phone:"",address:"",date_joined:null}}},async created(){await this.checkAuth()},methods:{async checkAuth(){const e=localStorage.getItem("access_token");if(e)try{const e=await z.getCurrentUser();this.userData=e.data,this.isAuthenticated=!0}catch(t){console.error("Error fetching user data:",t),this.isAuthenticated=!1,this.userData={id:null,username:"",email:"",first_name:"",last_name:"",role:"",phone:"",address:"",date_joined:null}}},formatDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"long",day:"numeric"}).format(t)},goToAuth(){this.$router.push("/auth")}}};const Ne=(0,l.A)(He,[["render",Me]]);var qe=Ne;const $e={class:"relative flex size-full min-h-screen flex-col bg-white justify-between group/design-root overflow-x-hidden pb-20",style:{"font-family":'Lexend, "Noto Sans", sans-serif'}};function Ze(e,t,s,o,r,i){const n=(0,a.g2)("BookingHistoryHeader"),l=(0,a.g2)("BookingList"),c=(0,a.g2)("NavigationBar");return(0,a.uX)(),(0,a.CE)("div",$e,[(0,a.Lk)("div",null,[(0,a.bF)(n),(0,a.bF)(l,{bookings:r.bookings},null,8,["bookings"])]),(0,a.bF)(c)])}const Ve={class:"flex items-center bg-white p-4 pb-2 justify-between"};function Qe(e,t,s,o,r,i){return(0,a.uX)(),(0,a.CE)("div",Ve,t[0]||(t[0]=[(0,a.Fv)('<h2 class="text-[#131711] text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pl-12">История бронирований</h2><div class="flex w-12 items-center justify-end"><button class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 bg-transparent text-[#131711] gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0"><div class="text-[#131711]"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256"><path d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"></path></svg></div></button></div>',2)]))}var Oe={name:"BookingHistoryHeader"};const ze=(0,l.A)(Oe,[["render",Qe]]);var Ge=ze;const Re={class:"flex flex-col gap-4 p-4"},Ue={key:0,class:"w-full text-center py-4"},We={key:1,class:"w-full text-center py-4 text-red-500"},Ke={key:2,class:"w-full text-center py-4 text-gray-500"};function Ye(e,t,s,o,r,i){const n=(0,a.g2)("BookingCard");return(0,a.uX)(),(0,a.CE)("div",Re,[r.isLoading?((0,a.uX)(),(0,a.CE)("div",Ue," Загрузка бронирований... ")):r.error?((0,a.uX)(),(0,a.CE)("div",We,(0,g.v_)(r.error),1)):r.bookings&&0!==r.bookings.length?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:3},(0,a.pI)(r.bookings,(t=>((0,a.uX)(),(0,a.Wv)(n,{key:t?.id||e.index,booking:t},null,8,["booking"])))),128)):((0,a.uX)(),(0,a.CE)("div",Ke,t[0]||(t[0]=[(0,a.Fv)('<div class="flex flex-col items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg><p>У вас пока нет бронирований</p><p class="text-sm text-gray-400">Забронируйте корт, чтобы увидеть его здесь</p></div>',1)])))])}const Je={class:"bg-white rounded-lg shadow p-4"},et={class:"flex flex-col gap-4"},tt={class:"flex items-start gap-4"},st={class:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0"},ot=["src","alt"],at={key:1,class:"w-full h-full bg-gray-200 flex items-center justify-center"},rt={class:"flex-1"},it={class:"text-[#6c8764] text-sm"},nt={class:"text-[#6c8764] text-sm"},lt={class:"flex items-center gap-2 text-[#6c8764]"},ct={class:"flex gap-4"},dt={class:"flex items-center gap-2"},ut={class:"flex items-center gap-2"},gt={key:0,class:"flex justify-center"},mt=["src"];function ht(e,t,s,o,r,i){const n=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",Je,[(0,a.Lk)("div",et,[(0,a.Lk)("div",tt,[(0,a.Lk)("div",st,[s.booking.playground_details?.images?.[0]?.image?((0,a.uX)(),(0,a.CE)("img",{key:0,src:s.booking.playground_details.images[0].image,alt:s.booking.playground_details.name,class:"w-full h-full object-cover"},null,8,ot)):((0,a.uX)(),(0,a.CE)("div",at,t[1]||(t[1]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-400"},[(0,a.Lk)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,a.Lk)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,a.Lk)("polyline",{points:"21 15 16 10 5 21"})],-1)])))]),(0,a.Lk)("div",rt,[(0,a.bF)(n,{to:`/stadium/${s.booking.playground}`,class:"text-lg font-semibold text-[#131711] hover:text-[#4a90e2] transition-colors"},{default:(0,a.k6)((()=>[(0,a.eW)((0,g.v_)(s.booking.playground_details?.name),1)])),_:1},8,["to"]),(0,a.Lk)("p",it,(0,g.v_)(i.formatPrice(s.booking.total_price))+" ₽",1),(0,a.Lk)("p",nt,"Депозит: "+(0,g.v_)(i.formatPrice(s.booking.deposit_amount))+" ₽",1)])]),(0,a.Lk)("div",lt,[t[2]||(t[2]=(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,a.Lk)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.Lk)("polyline",{points:"12 6 12 12 16 14"})],-1)),(0,a.Lk)("span",null,(0,g.v_)(i.formatDateTime(s.booking.start_time))+" - "+(0,g.v_)(i.formatTime(s.booking.end_time)),1)]),(0,a.Lk)("div",ct,[(0,a.Lk)("div",dt,[(0,a.Lk)("span",{class:(0,g.C4)(i.getStatusClass(s.booking.status))},(0,g.v_)(i.getStatusText(s.booking.status)),3)]),(0,a.Lk)("div",ut,[(0,a.Lk)("span",{class:(0,g.C4)(i.getPaymentStatusClass(s.booking.payment_status))},(0,g.v_)(i.getPaymentStatusText(s.booking.payment_status)),3)])]),s.booking.qr_code?((0,a.uX)(),(0,a.CE)("div",gt,[(0,a.Lk)("img",{src:s.booking.qr_code,alt:"QR Code",class:"w-32 h-32"},null,8,mt)])):(0,a.Q3)("",!0),s.booking.payment_url&&"PENDING"===s.booking.payment_status?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[0]||(t[0]=(...e)=>i.openPaymentUrl&&i.openPaymentUrl(...e)),class:"w-full bg-[#4a90e2] text-white py-2 px-4 rounded-lg hover:bg-[#357abd] transition-colors"}," Оплатить ")):(0,a.Q3)("",!0)])])}var ft={name:"BookingCard",props:{booking:{type:Object,required:!0}},methods:{formatPrice(e){return new Intl.NumberFormat("ru-RU").format(e)},formatDateTime(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},formatTime(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("ru-RU",{hour:"2-digit",minute:"2-digit"}).format(t)},getStatusClass(e){const t={CONFIRMED:"text-green-600",PENDING:"text-yellow-600",CANCELLED:"text-red-600"};return t[e]||"text-gray-600"},getStatusText(e){const t={CONFIRMED:"Подтверждено",PENDING:"Ожидает подтверждения",CANCELLED:"Отменено"};return t[e]||e},getPaymentStatusClass(e){const t={PAID:"text-green-600",PENDING:"text-yellow-600",FAILED:"text-red-600"};return t[e]||"text-gray-600"},getPaymentStatusText(e){const t={PAID:"Оплачено",PENDING:"Ожидает оплаты",FAILED:"Ошибка оплаты"};return t[e]||e},openPaymentUrl(){this.booking.payment_url&&window.open(this.booking.payment_url,"_blank")}}};const pt=(0,l.A)(ft,[["render",ht]]);var kt=pt;const xt={async getBookings(){return G.get("/bookings/")},async createBooking(e){return G.post("/bookings/",e)},async updateBooking(e,t){return G.put(`/bookings/${e}/`,t)},async deleteBooking(e){return G.delete(`/bookings/${e}/`)},async getBookingById(e){return G.get(`/bookings/${e}/`)}};var vt={name:"BookingList",components:{BookingCard:kt},data(){return{bookings:[],isLoading:!0,error:null,totalCount:0}},async created(){await this.fetchBookings()},methods:{async fetchBookings(){this.isLoading=!0,this.error=null;try{const e=await xt.getBookings();this.bookings=e.data.results||[],this.totalCount=e.data.count||0}catch(e){console.error("Error fetching bookings:",e),this.error="Не удалось загрузить бронирования",this.bookings=[],this.totalCount=0}finally{this.isLoading=!1}}}};const bt=(0,l.A)(vt,[["render",Ye]]);var wt=bt,yt={name:"BookingHistoryPage",components:{NavigationBar:ne,BookingHistoryHeader:Ge,BookingList:wt},data(){return{bookings:[{id:1,fieldName:'Футбольное поле "Зеленый газон"',location:"Ташкент, Чиланзар",image:"https://images.unsplash.com/photo-1556056504-5c7696c4c28d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1176&q=80",time:"18:00 - 19:30",status:"Завершено",date:"15 июня 2023"},{id:2,fieldName:'Спортивный комплекс "Олимпия"',location:"Ташкент, Мирзо-Улугбек",image:"https://images.unsplash.com/photo-1579952363873-27f3bade9f55?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",time:"20:00 - 21:30",status:"Отклонено",date:"10 июня 2023"},{id:3,fieldName:'Футбольный центр "Молодежный"',location:"Ташкент, Юнусабад",image:"https://images.unsplash.com/photo-1574629810360-7efbbe195018?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1293&q=80",time:"19:00 - 20:30",status:"Не оплачено",date:"5 июня 2023"},{id:4,fieldName:'Спортивный комплекс "Динамо"',location:"Ташкент, Шайхантахур",image:"https://images.unsplash.com/photo-1553778263-73a83bab9b0c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1171&q=80",time:"17:00 - 18:30",status:"Подтверждено",date:"1 июня 2023"},{id:5,fieldName:'Футбольное поле "Звезда"',location:"Ташкент, Алмазар",image:"https://images.unsplash.com/photo-1556056504-5c7696c4c28d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1176&q=80",time:"16:00 - 17:30",status:"Отменено",date:"20 июня 2023"},{id:6,fieldName:'Спортивный центр "Победа"',location:"Ташкент, Яккасарай",image:"https://images.unsplash.com/photo-1579952363873-27f3bade9f55?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",time:"15:00 - 16:30",status:"Просрочено",date:"25 июня 2023"}]}}};const Lt=(0,l.A)(yt,[["render",Ze]]);var Ct=Lt;const _t={class:"relative flex size-full min-h-screen flex-col bg-white",style:{"font-family":'Lexend, "Noto Sans", sans-serif'}},Et={class:"flex-1 overflow-y-auto pb-36"},It={class:"flex items-center bg-white p-4 gap-4"},At={class:"relative w-full h-48"},St=["src","alt"],Dt={class:"p-4"},Tt={class:"text-xl font-bold text-[#131711] mb-1"},Pt={class:"text-[#6c8764] text-sm"},Xt={class:"p-4 border-t border-[#f1f4f0]"},Bt={class:"flex items-center gap-2 mb-2"},jt={class:"text-[#131711] text-base"},Ft={class:"flex items-center gap-2"},Mt={class:"text-[#131711] text-base"},Ht={class:"p-4 border-t border-[#f1f4f0]"},Nt={class:"text-[#131711] text-base"},qt={class:"p-4 border-t border-[#f1f4f0]"},$t={class:"flex justify-between items-center"},Zt={class:"text-[#131711] text-xl font-bold"},Vt={class:"p-4 border-t border-[#f1f4f0]"},Qt={class:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-[#f1f4f0]"};function Ot(e,t,s,o,r,i){const n=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",_t,[(0,a.Lk)("div",Et,[(0,a.Lk)("div",It,[(0,a.bF)(n,{to:"/bookings",class:"text-[#131711]"},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none"},[(0,a.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 12H5m0 0l7 7m-7-7l7-7"})],-1)]))),_:1}),t[2]||(t[2]=(0,a.Lk)("h1",{class:"text-[#131711] text-lg font-bold"},"Детали бронирования",-1))]),(0,a.Lk)("div",At,[(0,a.Lk)("img",{src:r.booking.image,class:"w-full h-full object-cover",alt:r.booking.fieldName},null,8,St)]),(0,a.Lk)("div",Dt,[(0,a.Lk)("h2",Tt,(0,g.v_)(r.booking.fieldName),1),(0,a.Lk)("p",Pt,(0,g.v_)(r.booking.location),1)]),(0,a.Lk)("div",Xt,[t[5]||(t[5]=(0,a.Lk)("h3",{class:"text-lg font-bold text-[#131711] mb-4"},"Дата и время",-1)),(0,a.Lk)("div",Bt,[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-[#131711] flex items-center justify-center rounded-lg bg-[#f1f4f0] shrink-0 w-10 h-10"},[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 256 256"},[(0,a.Lk)("path",{d:"M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM208,208H48V96H208Zm0-144H48V48H72v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24Z"})])],-1)),(0,a.Lk)("p",jt,(0,g.v_)(r.booking.date),1)]),(0,a.Lk)("div",Ft,[t[4]||(t[4]=(0,a.Lk)("div",{class:"text-[#131711] flex items-center justify-center rounded-lg bg-[#f1f4f0] shrink-0 w-10 h-10"},[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 256 256"},[(0,a.Lk)("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h40A8,8,0,0,1,176,128Z"})])],-1)),(0,a.Lk)("p",Mt,(0,g.v_)(r.booking.time),1)])]),(0,a.Lk)("div",Ht,[t[6]||(t[6]=(0,a.Lk)("h3",{class:"text-lg font-bold text-[#131711] mb-4"},"Длительность",-1)),(0,a.Lk)("p",Nt,(0,g.v_)(r.booking.duration),1)]),(0,a.Lk)("div",qt,[t[8]||(t[8]=(0,a.Lk)("h3",{class:"text-lg font-bold text-[#131711] mb-4"},"Стоимость",-1)),(0,a.Lk)("div",$t,[t[7]||(t[7]=(0,a.Lk)("p",{class:"text-[#131711] text-base"},"Итого",-1)),(0,a.Lk)("p",Zt,(0,g.v_)(r.booking.price)+" сум",1)])]),(0,a.Lk)("div",Vt,[t[9]||(t[9]=(0,a.Lk)("h3",{class:"text-lg font-bold text-[#131711] mb-4"},"Статус",-1)),(0,a.Lk)("div",{class:(0,g.C4)([i.getStatusClass(r.booking.status),"inline-block px-3 py-1 rounded-full text-sm font-medium"])},(0,g.v_)(r.booking.status),3)])]),(0,a.Lk)("div",Qt,[i.canCancel?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>i.cancelBooking&&i.cancelBooking(...e)),class:"w-full py-3 px-4 bg-red-100 text-red-800 rounded-xl font-medium"}," Отменить бронирование ")):(0,a.Q3)("",!0),t[10]||(t[10]=(0,a.Lk)("p",{class:"text-center text-[#6c8764] text-sm mt-4"},[(0,a.eW)(" Нужна помощь? "),(0,a.Lk)("a",{href:"#",class:"text-[#131711] font-medium"},"Связаться с поддержкой")],-1))])])}var zt={name:"BookingDetailsPage",props:{bookingId:{type:[Number,String],required:!0}},data(){return{booking:null}},computed:{canCancel(){return this.booking&&["Подтверждено","Не оплачено"].includes(this.booking.status)}},methods:{getStatusClass(e){switch(e){case"Подтверждено":return"bg-green-100 text-green-800";case"Отменено":return"bg-red-100 text-red-800";case"Не оплачено":return"bg-yellow-100 text-yellow-800";case"Завершено":return"bg-gray-100 text-gray-800";case"Отклонено":return"bg-red-100 text-red-800";case"Просрочено":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},async fetchBookingDetails(){this.booking={id:this.bookingId,fieldName:'Футбольное поле "Зеленый газон"',location:"Ташкент, Чиланзар",image:"https://images.unsplash.com/photo-1556056504-5c7696c4c28d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1176&q=80",date:"15 июня 2023",time:"18:00 - 19:30",duration:"1.5 часа",price:"150,000",status:"Подтверждено"}},async cancelBooking(){if(confirm("Вы уверены, что хотите отменить бронирование?"))try{this.booking.status="Отменено"}catch(e){console.error("Ошибка при отмене бронирования:",e)}}},created(){this.fetchBookingDetails()}};const Gt=(0,l.A)(zt,[["render",Ot]]);var Rt=Gt;const Ut={class:"relative flex size-full min-h-screen flex-col bg-white",style:{"font-family":'Lexend, "Noto Sans", sans-serif'}},Wt={class:"flex-1 overflow-y-auto pb-36"},Kt={class:"flex items-center bg-white p-4 gap-4"},Yt={key:0,class:"flex justify-center items-center p-8"},Jt={key:1,class:"p-4 text-center text-red-500"},es={class:"relative w-full h-64"},ts={class:"relative w-full h-full"},ss={key:2,class:"absolute bottom-4 left-0 right-0 flex justify-center gap-2 px-2 z-10"},os=["onClick"],as={class:"p-4"},rs={class:"text-xl font-bold text-[#131711] mb-1"},is={class:"text-[#6c8764] text-sm"},ns={class:"text-[#131711] text-base mt-4"},ls={class:"p-4 border-t border-[#f1f4f0]"},cs={class:"flex justify-between items-center"},ds={class:"text-[#131711] text-xl font-bold"},us={class:"p-4 border-t border-[#f1f4f0]"},gs={class:"flex items-center gap-2"},ms={class:"text-[#131711] text-base"},hs={key:0,class:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-[#f1f4f0]"};function fs(e,t,s,o,r,i){const n=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",Ut,[(0,a.Lk)("div",Wt,[(0,a.Lk)("div",Kt,[(0,a.bF)(n,{to:"/",class:"text-[#131711]"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none"},[(0,a.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 12H5m0 0l7 7m-7-7l7-7"})],-1)]))),_:1}),t[7]||(t[7]=(0,a.Lk)("h1",{class:"text-[#131711] text-lg font-bold"},"Детали стадиона",-1))]),r.loading?((0,a.uX)(),(0,a.CE)("div",Yt,t[8]||(t[8]=[(0,a.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4ddf20]"},null,-1)]))):r.error?((0,a.uX)(),(0,a.CE)("div",Jt,(0,g.v_)(r.error),1)):r.stadium?((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[(0,a.Lk)("div",es,[(0,a.Lk)("div",ts,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.stadium.images,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:(0,g.C4)(["absolute inset-0 w-full h-full bg-center bg-no-repeat bg-cover transition-all duration-500",{"opacity-100 scale-100":r.currentImageIndex===s,"opacity-0 scale-110":r.currentImageIndex!==s}]),style:(0,g.Tr)({backgroundImage:`url(${e})`}),onTouchstart:t[0]||(t[0]=(...e)=>i.touchStart&&i.touchStart(...e)),onTouchmove:t[1]||(t[1]=(...e)=>i.touchMove&&i.touchMove(...e)),onTouchend:t[2]||(t[2]=(...e)=>i.touchEnd&&i.touchEnd(...e))},null,38)))),128))]),r.stadium.images.length>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[3]||(t[3]=(...e)=>i.prevImage&&i.prevImage(...e)),class:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center rounded-full bg-black/30 text-white hover:bg-black/50 transition-colors"},t[9]||(t[9]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none"},[(0,a.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))):(0,a.Q3)("",!0),r.stadium.images.length>1?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[4]||(t[4]=(...e)=>i.nextImage&&i.nextImage(...e)),class:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center rounded-full bg-black/30 text-white hover:bg-black/50 transition-colors"},t[10]||(t[10]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none"},[(0,a.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):(0,a.Q3)("",!0),r.stadium.images.length>1?((0,a.uX)(),(0,a.CE)("div",ss,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.stadium.images,((e,t)=>((0,a.uX)(),(0,a.CE)("button",{key:t,onClick:e=>r.currentImageIndex=t,class:(0,g.C4)(["w-2 h-2 rounded-full transition-all duration-300",r.currentImageIndex===t?"bg-white scale-125":"bg-white/50"])},null,10,os)))),128))])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",as,[(0,a.Lk)("h2",rs,(0,g.v_)(r.stadium.name),1),(0,a.Lk)("p",is,(0,g.v_)(r.stadium.location),1),(0,a.Lk)("p",ns,(0,g.v_)(r.stadium.description),1)]),(0,a.Lk)("div",ls,[t[12]||(t[12]=(0,a.Lk)("h3",{class:"text-lg font-bold text-[#131711] mb-4"},"Стоимость",-1)),(0,a.Lk)("div",cs,[t[11]||(t[11]=(0,a.Lk)("p",{class:"text-[#131711] text-base"},"За час",-1)),(0,a.Lk)("p",ds,(0,g.v_)(r.stadium.price),1)])]),(0,a.Lk)("div",us,[t[14]||(t[14]=(0,a.Lk)("h3",{class:"text-lg font-bold text-[#131711] mb-4"},"Информация о компании",-1)),(0,a.Lk)("div",gs,[t[13]||(t[13]=(0,a.Lk)("div",{class:"text-[#131711] flex items-center justify-center rounded-lg bg-[#f1f4f0] shrink-0 w-10 h-10"},[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 256 256"},[(0,a.Lk)("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h40A8,8,0,0,1,176,128Z"})])],-1)),(0,a.Lk)("p",ms,(0,g.v_)(r.stadium.company.username),1)])])],64)):(0,a.Q3)("",!0)]),r.stadium?((0,a.uX)(),(0,a.CE)("div",hs,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.goToBooking&&i.goToBooking(...e)),class:"w-full py-3 px-4 bg-[#4ddf20] text-[#131711] rounded-xl font-medium"}," Забронировать ")])):(0,a.Q3)("",!0)])}var ps={name:"StadiumDetailsPage",props:{id:{type:[Number,String],required:!0}},data(){return{stadium:null,loading:!0,error:null,currentImageIndex:0,touchStartX:0,touchEndX:0,minSwipeDistance:50}},methods:{touchStart(e){this.touchStartX=e.touches[0].clientX},touchMove(e){this.touchEndX=e.touches[0].clientX},touchEnd(){const e=this.touchEndX-this.touchStartX;Math.abs(e)>this.minSwipeDistance&&(e>0?this.prevImage():this.nextImage())},nextImage(){this.currentImageIndex=(this.currentImageIndex+1)%this.stadium.images.length},prevImage(){this.currentImageIndex=0===this.currentImageIndex?this.stadium.images.length-1:this.currentImageIndex-1},goToBooking(){this.$router.push(`/stadium/${this.id}/book`)},async fetchStadiumDetails(){this.loading=!0,this.error=null;try{this.stadium=await le.getStadiumDetails(this.id)}catch(e){console.error("Ошибка при загрузке деталей стадиона:",e),this.error="Не удалось загрузить информацию о стадионе. Пожалуйста, попробуйте позже."}finally{this.loading=!1}}},created(){this.fetchStadiumDetails()}};const ks=(0,l.A)(ps,[["render",fs]]);var xs=ks;const vs={class:"relative flex size-full min-h-screen flex-col bg-white",style:{"font-family":'Lexend, "Noto Sans", sans-serif'}},bs={class:"flex-1 overflow-y-auto pb-36"},ws={class:"flex items-center bg-white p-4 gap-4"},ys={key:0,class:"flex justify-center items-center p-8"},Ls={key:1,class:"p-4 text-center text-red-500"},Cs={class:"p-4"},_s={class:"text-xl font-bold text-[#131711] mb-1"},Es={class:"text-[#6c8764] text-sm"},Is={class:"p-4 border-t border-[#f1f4f0]"},As=["min"],Ss={key:0,class:"p-4 border-t border-[#f1f4f0]"},Ds={class:"flex flex-wrap gap-2"},Ts=["onClick","disabled"],Ps={key:0,class:"mt-4 p-4 bg-[#f1f4f0] rounded-xl"},Xs={class:"flex justify-between items-center"},Bs={class:"text-[#131711] font-medium"},js={key:0},Fs={class:"text-[#131711] font-medium"},Ms={key:1,class:"p-4 border-t border-[#f1f4f0] text-center text-[#6c8764]"},Hs={key:2,class:"p-4 border-t border-[#f1f4f0]"},Ns={class:"flex justify-between items-center"},qs={class:"text-[#131711] text-xl font-bold"},$s={key:0,class:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-[#f1f4f0]"};function Zs(e,t,s,r,i,n){const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",vs,[(0,a.Lk)("div",bs,[(0,a.Lk)("div",ws,[(0,a.bF)(l,{to:`/stadium/${s.id}`,class:"text-[#131711]"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none"},[(0,a.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 12H5m0 0l7 7m-7-7l7-7"})],-1)]))),_:1},8,["to"]),t[3]||(t[3]=(0,a.Lk)("h1",{class:"text-[#131711] text-lg font-bold"},"Бронирование",-1))]),i.loading?((0,a.uX)(),(0,a.CE)("div",ys,t[4]||(t[4]=[(0,a.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4ddf20]"},null,-1)]))):i.error?((0,a.uX)(),(0,a.CE)("div",Ls,(0,g.v_)(i.error),1)):i.stadium?((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[(0,a.Lk)("div",Cs,[(0,a.Lk)("h2",_s,(0,g.v_)(i.stadium.name),1),(0,a.Lk)("p",Es,(0,g.v_)(i.stadium.location),1)]),(0,a.Lk)("div",Is,[t[5]||(t[5]=(0,a.Lk)("h3",{class:"text-lg font-bold text-[#131711] mb-4"},"Выберите дату",-1)),(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>i.selectedDate=e),min:i.minDate,class:"w-full p-3 rounded-xl border border-[#f1f4f0] focus:outline-none focus:border-[#4ddf20]"},null,8,As),[[o.Jo,i.selectedDate]])]),i.timePoints.length>0?((0,a.uX)(),(0,a.CE)("div",Ss,[t[8]||(t[8]=(0,a.Lk)("h3",{class:"text-lg font-bold text-[#131711] mb-4"},"Выберите время",-1)),(0,a.Lk)("div",Ds,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.timePoints,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e.time,onClick:t=>n.selectTimePoint(e),class:(0,g.C4)(["px-4 py-2 rounded-xl text-sm font-medium transition-colors",n.getTimePointClass(e)]),disabled:!e.is_available},(0,g.v_)(e.time),11,Ts)))),128))]),i.selectedStartTime?((0,a.uX)(),(0,a.CE)("div",Ps,[(0,a.Lk)("div",Xs,[(0,a.Lk)("div",null,[t[6]||(t[6]=(0,a.Lk)("p",{class:"text-[#131711] text-sm"},"Начало",-1)),(0,a.Lk)("p",Bs,(0,g.v_)(i.selectedStartTime),1)]),i.selectedEndTime?((0,a.uX)(),(0,a.CE)("div",js,[t[7]||(t[7]=(0,a.Lk)("p",{class:"text-[#131711] text-sm"},"Конец",-1)),(0,a.Lk)("p",Fs,(0,g.v_)(i.selectedEndTime),1)])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0)])):i.selectedDate?((0,a.uX)(),(0,a.CE)("div",Ms," Нет доступных слотов на выбранную дату ")):(0,a.Q3)("",!0),i.selectedStartTime&&i.selectedEndTime?((0,a.uX)(),(0,a.CE)("div",Hs,[t[10]||(t[10]=(0,a.Lk)("h3",{class:"text-lg font-bold text-[#131711] mb-4"},"Депозит",-1)),(0,a.Lk)("div",Ns,[t[9]||(t[9]=(0,a.Lk)("p",{class:"text-[#131711] text-base"},"Сумма депозита",-1)),(0,a.Lk)("p",qs,(0,g.v_)(n.depositAmount)+" сум",1)]),t[11]||(t[11]=(0,a.Lk)("p",{class:"text-[#6c8764] text-sm mt-2"},"Депозит равен стоимости одного часа игры",-1))])):(0,a.Q3)("",!0)],64)):(0,a.Q3)("",!0)]),n.canBook?((0,a.uX)(),(0,a.CE)("div",$s,[(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.createBooking&&n.createBooking(...e)),class:"w-full py-3 px-4 bg-[#4ddf20] text-[#131711] rounded-xl font-medium"}," Подтвердить бронирование ")])):(0,a.Q3)("",!0)])}var Vs={name:"StadiumBooking",props:{id:{type:[Number,String],required:!0}},data(){return{stadium:null,loading:!0,error:null,selectedDate:(new Date).toISOString().split("T")[0],minDate:(new Date).toISOString().split("T")[0],timePoints:[],selectedStartTime:null,selectedEndTime:null}},computed:{depositAmount(){return this.stadium?this.stadium.price_per_hour:0},canBook(){return this.selectedStartTime&&this.selectedEndTime&&this.selectedEndTime>this.selectedStartTime}},methods:{getTimePointClass(e){return console.log("Getting class for time point:",e),e.is_available?e.time===this.selectedStartTime||e.time===this.selectedEndTime||this.selectedStartTime&&this.selectedEndTime&&e.time>this.selectedStartTime&&e.time<this.selectedEndTime?"bg-[#4ddf20] text-[#131711]":"bg-[#f1f4f0] text-[#131711] hover:bg-[#e5e9e3]":"bg-gray-100 text-gray-400 cursor-not-allowed"},selectTimePoint(e){console.log("Selecting time point:",e),e.is_available?this.selectedStartTime?this.selectedEndTime?(console.log("Resetting selection, new start time:",e.time),this.selectedStartTime=e.time,this.selectedEndTime=null):e.time>this.selectedStartTime?(console.log("Setting end time:",e.time),this.selectedEndTime=e.time):(console.log("Resetting start time to:",e.time),this.selectedStartTime=e.time):(console.log("Setting start time:",e.time),this.selectedStartTime=e.time):console.log("Time point is not available, skipping selection")},async fetchStadiumDetails(){console.log("Fetching stadium details for ID:",this.id),this.loading=!0,this.error=null;try{this.stadium=await le.getStadiumDetails(this.id),console.log("Stadium details received:",this.stadium)}catch(e){console.error("Error fetching stadium details:",e),this.error="Не удалось загрузить информацию о стадионе. Пожалуйста, попробуйте позже."}finally{this.loading=!1,console.log("Stadium details fetch completed, loading:",this.loading)}},async fetchAvailableTimePoints(){if(console.log("Component: Starting fetchAvailableTimePoints"),console.log("Component: Current state:",{selectedDate:this.selectedDate,id:this.id,loading:this.loading,error:this.error,stadium:this.stadium}),!this.id)return console.error("Component: Error - stadium ID is missing"),void(this.error="ID стадиона не найден");if(this.selectedDate){this.loading=!0,console.log("Component: Set loading state to true");try{console.log("Component: Calling checkAvailability API with:",{id:this.id,date:this.selectedDate});const e=await le.checkAvailability(this.id,this.selectedDate);console.log("Component: API Response received:",e),this.timePoints=e.time_points||[],console.log("Component: Time points set:",this.timePoints),0===this.timePoints.length?console.log("Component: No time points available"):console.log("Component: Available time points:",this.timePoints.map((e=>({time:e.time,is_available:e.is_available}))))}catch(e){console.error("Component: Error in fetchAvailableTimePoints:",e),console.error("Component: Error details:",{message:e.message,response:e.response?.data,status:e.response?.status}),this.error=e.message||"Не удалось загрузить доступное время. Пожалуйста, попробуйте позже.",this.timePoints=[]}finally{this.loading=!1,console.log("Component: Set loading state to false")}}else console.log("Component: No date selected, skipping time points fetch")},async createBooking(){if(console.log("Starting booking process..."),this.canBook)try{const e={playground:this.id,start_time:`${this.selectedDate} ${this.selectedStartTime}:00`,end_time:`${this.selectedDate} ${this.selectedEndTime}:00`};console.log("Sending booking data:",e);const t=await le.createBooking(e);console.log("Booking created successfully:",t),alert("Бронирование успешно создано!"),this.$router.push("/")}catch(e){console.error("Error creating booking:",e),e.response?(console.error("Server error response:",e.response.data),e.response.data.detail?this.error=e.response.data.detail:e.response.data.message?this.error=e.response.data.message:e.response.data.error?this.error=e.response.data.error:this.error="Ошибка сервера: "+JSON.stringify(e.response.data)):e.request?(console.error("No response received:",e.request),this.error="Нет ответа от сервера. Проверьте подключение к интернету."):(console.error("Request setup error:",e.message),this.error="Ошибка при отправке запроса: "+e.message)}else console.log("Cannot book: form validation failed")}},watch:{selectedDate(){console.log("Component: Date changed to:",this.selectedDate),console.log("Component: Resetting time selections"),this.selectedStartTime=null,this.selectedEndTime=null,console.log("Component: Fetching new time points"),this.fetchAvailableTimePoints()}},async created(){console.log("Component: Starting initialization"),console.log("Component: Props:",{id:this.id});try{console.log("Component: Fetching stadium details"),await this.fetchStadiumDetails(),console.log("Component: Stadium details fetched:",this.stadium),console.log("Component: Fetching initial time points"),await this.fetchAvailableTimePoints(),console.log("Component: Initial time points fetched:",this.timePoints)}catch(e){console.error("Component: Error during initialization:",e)}}};const Qs=(0,l.A)(Vs,[["render",Zs]]);var Os=Qs;const zs={class:"auth-container"},Gs={class:"auth-header"},Rs={class:"auth-content"},Us={class:"auth-form-container"},Ws={class:"form-group"},Ks={key:0,class:"error-message"},Ys={class:"form-group"},Js={class:"password-input-container"},eo=["type"],to={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},so={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},oo={key:0,class:"error-message"},ao=["disabled"];function ro(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",zs,[(0,a.Lk)("div",Gs,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.goBack&&n.goBack(...e)),class:"back-button"},t[5]||(t[5]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,a.Lk)("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1)])),t[6]||(t[6]=(0,a.Lk)("h1",null,"Вход",-1))]),(0,a.Lk)("div",Rs,[(0,a.Lk)("div",Us,[(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,o.D$)(((...e)=>n.handleSubmit&&n.handleSubmit(...e)),["prevent"])),class:"auth-form"},[(0,a.Lk)("div",Ws,[t[7]||(t[7]=(0,a.Lk)("label",{for:"username"},"Логин",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[1]||(t[1]=e=>i.username=e),required:"",placeholder:"Введите ваш логин",class:(0,g.C4)(["auth-input",{error:i.errors.username}])},null,2),[[o.Jo,i.username]]),i.errors.username?((0,a.uX)(),(0,a.CE)("span",Ks,(0,g.v_)(i.errors.username),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ys,[t[10]||(t[10]=(0,a.Lk)("label",{for:"password"},"Пароль",-1)),(0,a.Lk)("div",Js,[(0,a.bo)((0,a.Lk)("input",{type:i.showPassword?"text":"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e),required:"",placeholder:"Введите ваш пароль",class:(0,g.C4)(["auth-input",{error:i.errors.password}])},null,10,eo),[[o.hp,i.password]]),(0,a.Lk)("button",{type:"button",class:"password-toggle",onClick:t[3]||(t[3]=(...e)=>n.togglePassword&&n.togglePassword(...e))},[i.showPassword?((0,a.uX)(),(0,a.CE)("svg",so,t[9]||(t[9]=[(0,a.Lk)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},null,-1),(0,a.Lk)("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)]))):((0,a.uX)(),(0,a.CE)("svg",to,t[8]||(t[8]=[(0,a.Lk)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),(0,a.Lk)("circle",{cx:"12",cy:"12",r:"3"},null,-1)])))])]),i.errors.password?((0,a.uX)(),(0,a.CE)("span",oo,(0,g.v_)(i.errors.password),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{type:"submit",class:"submit-btn",disabled:i.isLoading},(0,g.v_)(i.isLoading?"Вход...":"Войти"),9,ao)],32),t[11]||(t[11]=(0,a.Lk)("div",{class:"auth-footer"},[(0,a.Lk)("p",null,[(0,a.eW)("Нет аккаунта? "),(0,a.Lk)("a",{href:"#",class:"auth-link"},"Зарегистрироваться")])],-1))])])])}var io={name:"AuthPage",data(){return{username:"",password:"",showPassword:!1,isLoading:!1,errors:{username:"",password:"",general:""}}},methods:{async handleSubmit(){this.isLoading=!0,this.errors={username:"",password:"",general:""};try{await z.login(this.username,this.password),this.$router.push("/")}catch(e){if(e.response){const{data:t}=e.response;t.detail?this.errors.general=t.detail:t.username?this.errors.username=t.username[0]:t.password&&(this.errors.password=t.password[0])}else this.errors.general="Произошла ошибка при входе. Попробуйте позже."}finally{this.isLoading=!1}},togglePassword(){this.showPassword=!this.showPassword},goBack(){this.$router.back()}}};const no=(0,l.A)(io,[["render",ro],["__scopeId","data-v-44bbe34c"]]);var lo=no;const co=[{path:"/auth",name:"Auth",component:lo},{path:"/",name:"Home",component:ue},{path:"/favorites",name:"Favorites",component:Le},{path:"/profile",name:"Profile",component:qe},{path:"/bookings",name:"Bookings",component:Ct},{path:"/bookings/:id",name:"BookingDetails",component:Rt,props:!0},{path:"/stadium/:id",name:"StadiumDetails",component:xs,props:!0},{path:"/stadium/:id/book",name:"StadiumBooking",component:Os,props:!0}],uo=(0,u.aE)({history:(0,u.LA)("/repository-name/"),routes:co});var go=uo;const mo=(0,o.Ef)(d);mo.use(go),mo.mount("#app")}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,o,a,r){if(!o){var i=1/0;for(d=0;d<e.length;d++){o=e[d][0],a=e[d][1],r=e[d][2];for(var n=!0,l=0;l<o.length;l++)(!1&r||i>=r)&&Object.keys(s.O).every((function(e){return s.O[e](o[l])}))?o.splice(l--,1):(n=!1,r<i&&(i=r));if(n){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,a,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,i=o[0],n=o[1],l=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(l)var d=l(s)}for(t&&t(o);c<i.length;c++)r=i[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},o=self["webpackChunkpolya_top_bot_frontend"]=self["webpackChunkpolya_top_bot_frontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(3576)}));o=s.O(o)})();
//# sourceMappingURL=app.142a064d.js.map